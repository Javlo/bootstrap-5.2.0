'use strict';var JAVLO_JS_VERSION="v3.2.6",firstCollaspeTitleOpen=!0;console.log("javlo.js : "+JAVLO_JS_VERSION);var DEBUG_AJAX_SEARCH=!1,SCROLL_BODY_LIMIT=5;document.addEventListener("DOMContentLoaded",function(a){prepareImageLoadingIfVisible();initFixNav();staticSearch();updateAjaxForms();initCollapseBootstrap(".collapse-title");searchMark("#content","mark-text");initFixItems();testScroll();mobileTable(".wysiwyg-paragraph table",3,1);ajaxNav()});
function getCurrentAnchor(){return window.location.hash?window.location.hash.substring(1):null}function getAbsoluteHeight(a){a="string"===typeof a?document.querySelector(a):a;var b=window.getComputedStyle(a);b=parseFloat(b.marginTop)+parseFloat(b.marginBottom);return Math.ceil(a.offsetHeight+b)}
function initFixNav(){var a=document.querySelector(".navbar.fixed-top");if(null!=a){var b=window.getComputedStyle(a);a=getAbsoluteHeight(a)-parseFloat(b.paddingBottom);b=document.querySelector(".main-container");null!=b&&(b.style["margin-top"]=a+"px")}}
function fixItem(a){if(null!=a){let b=0,c=document.querySelector(".navbar");null!=c&&c.classList.contains("fixed-top")&&(b=c.offsetHeight,0>b&&(b=0));a.classList.contains("fix-item")&&window.pageYOffset<a.dataset.scrollLimit&&(a.classList.remove("fix-item"),a.style.position="static",a.style.width="auto",a.removeAttribute("data-scrollLimit"));a.getBoundingClientRect().top<=b&&(a.style.width=a.getBoundingClientRect().width+"px",a.style.position="fixed",a.style.top=b+"px",a.classList.add("fix-item"),
a.dataset.scrollLimit||(a.dataset.scrollLimit=window.pageYOffset))}}function initFixItems(){document.body.classList.contains("fix-sidebar")&&(fixItem(document.getElementById("sidebar")),fixItem(document.getElementById("contextzone")),document.onscroll=function(a){fixItem(document.getElementById("sidebar"));fixItem(document.getElementById("contextzone"))})}function startLoading(){document.body.classList.add("ajax-loading")}function endLoading(){document.body.classList.remove("ajax-loading")}
function staticSearch(){try{var a=document.getElementById("staticSearchData"),b=document.getElementById("staticSearchButton"),c=document.getElementById("staticSearchResult");if(a&&b&&c){var d=[],e=!1,f=function(){if(!e||!this.value||1>=this.value.length)c.innerHTML="",c.classList.replace("result","no-result");else{var g=search(this.value,d,5);c.innerHTML="";if(0===g.length)c.classList.replace("result","no-result");else{c.classList.replace("no-result","result");const h=this.value;g.forEach(k=>{const l=
new URL(k.url,window.location.origin);l.searchParams.append("mark-text",h);c.innerHTML+=`
            <a class="search-item" href="${l}">
              <span class="search-title">${k.title}</span>
              ${k.description?`<p>${k.description}</p>`:""}
            </a>`})}}};b.addEventListener("focus",async()=>{if(!e)try{d=await (await fetch(a.getAttribute("href"))).json(),e=!0,DEBUG_AJAX_SEARCH&&console.log("Search data loaded:",d)}catch(g){console.error("Error loading search data:",g)}});b.addEventListener("keyup",f);b.addEventListener("paste",f)}else DEBUG_AJAX_SEARCH&&console.log("Ajax search form not found.")}catch(g){console.error("Error in staticSearch:",g)}}
function search(a,b,c){if(!a||!b?.pages)return[];a=a.toLowerCase();return b.pages.map(d=>{let e=0;d.title?.toLowerCase().includes(a)&&(e+=3);d.description?.toLowerCase().includes(a)&&(e+=2);d.content?.toLowerCase().includes(a)&&(e+=1);return 0<e?{url:d.url,title:d.title,description:d.description,weight:e+(d.weight||0)}:null}).filter(Boolean).sort((d,e)=>e.weight-d.weight).slice(0,c)}
function ajaxSubmitForm(a,b,c){const d=new URLSearchParams;for(const e of new FormData(a))d.append(e[0],e[1]);c?fetch(a.action,{body:d,method:"post","Content-Type":"text/plain; charset\x3dUTF-8"}).then(e=>e.json()).then(e=>{try{b(e)}catch(f){b()}}):fetch(a.action,{body:d,method:"post","Content-Type":"text/plain; charset\x3dUTF-8"}).then(e=>{b(e.text())})}
function executeFunctionByName(a,b,c){c=Array.prototype.slice.call(arguments,2);for(var d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(b,c)}reloadPage=function(){var a=document.documentElement,b=document.body;a=a&&a.scrollTop||b&&b.scrollTop||0;b=window.location.href;1<=b.indexOf("_scrollTo")&&(b=b.substring(0,b.indexOf("_scrollTo")-1));b=0>b.indexOf("?")?b+"?_scrollTo\x3d"+a:b+"\x26_scrollTo\x3d"+a;window.location.href=b};
function elementInViewport(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b<window.pageYOffset+window.innerHeight&&c<window.pageXOffset+window.innerWidth&&b+e>window.pageYOffset&&c+d>window.pageXOffset}
function askFullscreen(){var a=document.getElementsByTagName("body")[0];a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}
function cancelFullScreen(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msCancelFullScreen&&document.msCancelFullScreen()}function addParam(a,b){var c=a&&-1!==a.indexOf("?");b&&(a+=(c?"\x26":"?")+b);return a}
function findGetParameter(a,b){var c=null,d=[];location.search.substr(1).split("\x26").forEach(function(e){d=e.split("\x3d");d[0]===a&&(c=(d[1]+"").replace(/\+/g,"%20"),c=decodeURIComponent(c))});return null==c?b:c}function getArea(a,b){a=addParam(a,"area-only\x3d"+b);fetch(dataItem.getAttribute("href"),opts).then(function(c){return c})}
function removeParam(a,b){var c=a.split("?")[0];a=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==a){var d=a.split("\x26");for(var e=d.length-1;0<=e;--e)a=d[e].split("\x3d")[0],a===b&&d.splice(e,1);c=c+"?"+d.join("\x26")}return c}function wrap(a,b){a.parentNode.insertBefore(b,a);b.appendChild(a)}function getBody(a){var b=a.indexOf("\x3cbody");b=a.indexOf("\x3e",b);var c=a.lastIndexOf("\x3c/body\x3e");return a.slice(b+1,c)}
function setCookie(a,b,c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="expires\x3d"+d.toUTCString();document.cookie=a+"\x3d"+b+";"+c+";path\x3d/;SameSite\x3dStrict"}function getCookie(a){a+="\x3d";for(var b=decodeURIComponent(document.cookie).split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}
runScriptInItem=function(a){a.querySelectorAll("script").forEach(b=>{const c=document.createElement("script");c.textContent=b.textContent;document.body.appendChild(c);b.remove()})};
ajaxDoneDefaultFunction=function(a){document.body.classList.remove("ajax-loading");null!=a.data&&a.data["need-refresh"]&&reloadPage();for(let [c,d]of Object.entries(a.insideZone)){console.log("xhtmlId.key \x3d ",c.key);console.log("xhtml   \x3d ",d);0>c.indexOf("#")&&0>c.indexOf(" ")&&(c="#"+c);var b=document.querySelector(c);null!=b&&(b.innerHTML=d,runScriptInItem(b))}for(let [c,d]of Object.entries(a.zone))0>c.indexOf("#")&&0>c.indexOf(" ")&&(c="#"+c),b=document.querySelector(c),null!=b&&(b.innerHTML=
d,runScriptInItem(b))};function submitForm(a){let b=new Event("submit",{bubbles:!0,cancelable:!0});a.dispatchEvent(b)}
function updateAjaxForms(){try{document.querySelectorAll("form.ajax-form").forEach(function(a){a.onsubmit=function(b){b.preventDefault();b.stopPropagation();startLoading();if(b=document.getElementById("message-container"))b.innerHTML="";b=new FormData(a);const c=a.dataset.type||"json",d=a.getAttribute("data-ajaxaction")||a.action;fetch(d,{method:"post",body:b,headers:{"Content-Type":c}}).then(e=>e.json()).then(e=>{try{ajaxDoneDefaultFunction(e)}catch(f){console.error("Error in ajax callback:",f)}finally{endLoading()}}).catch(e=>
{console.error("Error submitting form:",e);endLoading()});return!1}})}catch(a){console.error("Error in updateAjaxForms:",a)}}
function initCollapseBootstrap(a){document.body.classList.contains("edit-preview")||document.querySelectorAll(a).forEach(function(b,c){id="_collapse-title-"+(c+1);link=document.createElement("div");let d=b.querySelector(".heading-anchor").getAttribute("id");var e=" show";let f=getCurrentAnchor();null!=f&&(firstCollaspeTitleOpen=!1);firstCollaspeTitleOpen&&0===c||d===f?(link.setAttribute("class","collapse-title-action"),link.setAttribute("aria-expanded","true")):(link.setAttribute("class","collapse-title-action collapsed"),
link.setAttribute("aria-expanded","false"),e="");link.setAttribute("data-bs-toggle","collapse");link.setAttribute("href","#"+id);link.setAttribute("role","button");link.setAttribute("aria-controls",id);display=document.createElement("span");display.setAttribute("class","collpase-title-arrow");b.innerHTML='\x3ci class\x3d"collapse-on bi bi-chevron-right"\x3e\x3c/i\x3e\x3ci class\x3d"collapse-off bi bi-chevron-down"\x3e\x3c/i\x3e '+b.innerHTML;sister=b.nextSibling;wrap(b,link);wrap(b,display);collapseDiv=
document.createElement("div");collapseDiv.setAttribute("id",id);collapseDiv.setAttribute("class","collapse collapse-title-target"+e);collapseDivInWrapper=document.createElement("div");collapseDivInWrapper.setAttribute("class","collapse-title-target-in-wrapper");console.log(b.tagName);b=parseInt(b.tagName.substring(1));c=99;sister.tagName&&sister.tagName.startsWith("H")&&2===sister.tagName.length&&(c=parseInt(sister.tagName.substring(1)));for(e=[];null!=sister&&c>b;)e.push(sister),sister=sister.nextSibling,
null!=sister&&sister.tagName&&sister.tagName.startsWith("H")&&2==sister.tagName.length&&(c=parseInt(sister.tagName.substring(1)));e.forEach(g=>{wrap(g,collapseDivInWrapper);wrap(g.parentNode,collapseDiv)});collapseDiv.querySelectorAll("form").forEach(g=>{let h=g.getAttribute("action");null==h?g.setAttribute("action","#"+d):(0<=h.indexOf("#")&&(h=h.substring(0,h.indexOf("#"))),g.setAttribute("action",h+"#"+d))})})}
function searchMark(a,b){let c=findGetParameter("mark-text","");null!=c&&0<c.length&&document.querySelectorAll(a).forEach(d=>{replaceQuery(d,c,b)})}function replaceQuery(a,b,c){a.childNodes.forEach(d=>{"undefined"!==typeof d.innerHTML&&replaceQuery(d,b,c)});a.innerText==a.innerHTML&&(regEx=new RegExp("("+b+")","ig"),a.innerHTML=a.innerHTML.replace(regEx,"\x3cspan class\x3d'"+c+"'\x3e$1\x3c/span\x3e"))}
function isAtBottomOfPage(){return(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)+window.innerHeight>=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}
function testScroll(){document.documentElement.scrollTop>SCROLL_BODY_LIMIT?(document.body.classList.add("scrolled"),document.body.classList.remove("unscrolled")):(document.body.classList.remove("scrolled"),document.body.classList.add("unscrolled"));isAtBottomOfPage()?document.body.classList.add("scrolled_bottom"):document.body.classList.remove("scrolled_bottom")}window.onscroll=function(){testScroll()};
function resetRadio(a){document.querySelectorAll('input[type\x3d"radio"][name\x3d"'+a+'"]').forEach(b=>{b.checked=!1})}function getFormFieldValue(a){return a?"checkbox"===a.type?a.checked:"radio"===a.type?(a=document.querySelector(`input[name="${a.name}"]:checked`))?a.value:null:a.value:null}
function mobileTable(a,b,c){document.querySelectorAll(a).forEach(d=>{const e=d.querySelectorAll("tr"),f=e[0].querySelectorAll("th, td").length;if(0<[...d.querySelectorAll("td")].length){var g=[];if(f>b){let k=0;for(;k<f;){const l=document.createElement("table");l.classList.add("splitted-table","d-block","d-sm-none");for(const p of e){const n=document.createElement("tr");if(0!==k){var h=p.querySelector("th");h&&n.appendChild(h.cloneNode(!0))}h=p.querySelectorAll("th, td");for(let m=k;m<k+c&&m<f;m++)n.appendChild(h[m].cloneNode(!0));
l.appendChild(n)}0<l.querySelectorAll("td").length&&g.unshift(l);k+=c}g.forEach(l=>{d.parentNode.insertBefore(l,d.nextSibling)});d.classList.add("d-none","d-sm-block")}}})}
function prepareImageLoadingIfVisible(){try{const b=document.querySelectorAll("img[data-src-on-visible]");if(b.length){var a=new IntersectionObserver((c,d)=>{c.forEach(e=>{if(e.isIntersecting){e=e.target;const f=e.getAttribute("data-src-on-visible");f&&(e.src=f,e.removeAttribute("data-src-on-visible"),d.unobserve(e))}})});b.forEach(c=>{c.classList.add("_lazy_loading_image");a.observe(c)})}}catch(b){console.error("Error in prepareImageLoadingIfVisible:",b)}}const POPUPURLNAME="_popupurl";
function findGetParameter(a){let b=null,c=[];location.search.substr(1).split("\x26").forEach(function(d){c=d.split("\x3d");c[0]===a&&(b=decodeURIComponent(c[1]))});return b}function addParam(a,b){const c=-1!==a.indexOf("?")?"\x26":"?";return a+c+b}
function removeParam(a,b){var c=a.split("?");if(2<=c.length){a=c.shift();c=c.join("?");b=encodeURIComponent(b)+"\x3d";c=c.split(/[&;]/g);for(let d=c.length;0<d--;)-1!==c[d].lastIndexOf(b,0)&&c.splice(d,1);return a+(0<c.length?"?"+c.join("\x26"):"")}return a}
function openPopup(a,b){const c=document.createElement("div");c.className="main-popup loader";c.innerHTML='\x3cdiv class\x3d"wrapper"\x3e...\x3c/div\x3e';document.body.appendChild(c);c.addEventListener("click",()=>{c.remove()});fetch(addParam(b,"only-area\x3dcontent"),{method:"GET"}).then(d=>d.text()).then(d=>{c.remove();const e=document.createElement("div");e.className="main-popup";e.innerHTML=`<div class="wrapper"><button class="close-popup" aria-label="Close" lang="en">x</button>${d}</div>`;document.body.appendChild(e);
e.querySelector(".close-popup").addEventListener("click",closePopup)})}function closePopup(){var a=document.querySelectorAll(".main-popup");if(0===a.length)return!0;a.forEach(b=>b.remove());a=removeParam(window.location.href,POPUPURLNAME);a!==window.location.href&&window.history.pushState(null,null,a);return!1}
function initPopupLinks(){document.querySelectorAll("a.popup").forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();b=this.getAttribute("href");const c=addParam(window.location.href,POPUPURLNAME+"\x3d"+b);window.history.pushState("popup",this.getAttribute("title"),c);openPopup(this.getAttribute("title"),b)})})}document.addEventListener("DOMContentLoaded",function(){popup();initPopupLinks()});document.addEventListener("keydown",function(a){if("Escape"===a.key)return closePopup()});
window.addEventListener("popstate",function(a){"undefined"!==typeof ajaxNavDone&&ajaxNavDone&&updateAreas(window.location.href);return closePopup()});function popup(){const a=findGetParameter(POPUPURLNAME);null!=a&&openPopup(a,a)}
function formatJsonDate(a){let b,c;if(a.hasOwnProperty("year")&&a.hasOwnProperty("month")&&a.hasOwnProperty("day"))b=a.year,c=a.month,a=a.day;else if(Array.isArray(a)&&3===a.length)[b,c,a]=a;else return"";return`${a.toString().padStart(2,"0")}/${c.toString().padStart(2,"0")}/${b}`}
function formatJsonTime(a){let b;if(a.hasOwnProperty("hours")&&a.hasOwnProperty("minutes"))b=a.hours,a=a.minutes;else if(Array.isArray(a)&&2===a.length)[b,a]=a;else return"";return`${b.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}
function updateAreas(a,b){document.querySelectorAll(".ajax-nav.collapse").forEach(c=>{c.classList.remove("show")});null!=b&&(document.querySelectorAll(".ajax-nav .nav-item").forEach(c=>{c.classList.remove("active")}),b.parentNode.classList.add("active"),window.history.pushState(b.getAttribute("name"),b.getAttribute("title"),b.getAttribute("href")));a=addParam(a,"ajax\x3dtrue");fetch(a,{method:"GET"}).then(c=>c.text()).then(c=>{const d=document.createElement("html");d.innerHTML=c;c=d.querySelector("body").className;
document.body.className=c;document.title=d.querySelector("title").innerText;(c=document.body.dataset.areas)?c.split(",").forEach(e=>{const f=d.querySelector(`#${e}`);e=document.getElementById(e);f&&e?(e.outerHTML=f.outerHTML,executeScriptsFromHTML(f.outerHTML)):e&&(e.innerHTML="")}):document.querySelectorAll("._area").forEach(e=>{const f=d.querySelector(`#${e.id}`);f?(e.outerHTML=f.outerHTML,executeScriptsFromHTML(f.outerHTML)):e.innerHTML=""});ajaxNav();handleRefresh(b)}).catch(c=>{console.error("Error fetching content:",
c)});return!1}function isPreview(){return document.body.classList.contains("preview-logged")}
function ajaxNav(){isPreview()||(document.querySelectorAll(".ajax-nav a").forEach(a=>{a.classList.contains("ajax-nav-done")||a.getAttribute("href").startsWith("http")||!a.getAttribute("href").endsWith(".html")&&!a.getAttribute("href").endsWith("/")||(a.classList.add("ajax-nav-done"),a.addEventListener("click",function(b){b.preventDefault();document.getElementById("wrapper").classList.add("toggled");ajaxNavDone=!0;return updateAreas(a.getAttribute("href"),a)}))}),document.querySelectorAll("a.content-area-only").forEach(a=>
{a.addEventListener("click",function(b){b.preventDefault();document.querySelectorAll("a.content-area-only").forEach(c=>{c.classList.remove("active")});a.classList.add("active");window.history.pushState(a.getAttribute("data-name"),a.getAttribute("title"),a.getAttribute("href"));updateAreas(a.getAttribute("href"),a);return!1})}))}function handleRefresh(a){const b=a.getAttribute("data-refresh");if(b){const c=window[b];"function"===typeof c?c(a):console.warn(`La m\u00e9thode "${b}" n'existe pas.`)}}
function executeScriptsFromHTML(a){const b=document.createElement("div");b.innerHTML=a;b.querySelectorAll("script").forEach(c=>{if(c.src){const d=document.createElement("script");d.src=c.src;document.body.appendChild(d)}else(c=c.textContent||c.innerText)&&(new Function(c))()})};